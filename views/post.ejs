<%- include('partials/header') -%>
<div class="container">
  <div class="row justify-content-center mt-5 border">
    <span class="text-white">The list price for every car at ECS includes:</span>
    <ul class="pl-2">
      <li class="text-white ml-2">A b5 inspection at Puspakom</li>
      <li class="text-white ml-2">In-person assistance at JPJ, and all transfer of ownership fees</li>
      <li class="text-white ml-2">A fair insurance quote from our personal provider</li>
    </ul>
  </div>
  <div class="row justify-content-center mt-5 border">
    <div class="col border">
      <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img class="d-block w-100" src="<%= post.exteriorImage.concat(post.interiorImage)[0] %>" alt="slide #1">
          </div>
          <% for(let i=1; i<post.exteriorImage.concat(post.interiorImage).length; i++) {%>
            <div class="carousel-item ">
              <img class="d-block w-100" src="<%= post.exteriorImage.concat(post.interiorImage)[i] %>" alt="slide #<%= i+1 %>">
            </div>
          <% } %>  
        </div>
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>     
    </div>
    <div class="col  ">
      <div class="col">
        <h2 class="text-white"><%= post.year %> <%= post.make %> <%= post.model %></h2>
        <h2 class="text-white"><%= post.priceOfficial || "Call for price" %></h2>
        <h3 class="text-white">Key Details</h3>
        <ul style="list-style: none;">
          <li class="text-white">Make: <%= post.make %></li>
          <li class="text-white">Model: <%= post.model %></li>
          <li class="text-white">Spec: <%= post.spec %></li>
          <li class="text-white">Engine Size: <%= post.engineSize %></li>
          <li class="text-white">Year: <%= post.year %></li>
          <li class="text-white">Transmission Type: <%= post.transmission %></li>
          <li class="text-white">Number of Seats: <%= post.numOfSeats %></li>
          <li class="text-white">Color: <%= post.color %></li>
          <li class="text-white">Fuel Type: <%= post.fuelType %></li>
          <li class="text-white">Tire Condition: <%= post.tires %></li>
          <li class="text-white">Mileage: <%= post.mileage %></li>
          <li class="text-white">Full Service History: <%= post.history || 'Unknown' %></li>
          <li class="text-white">Number of Owners: <%= post.numOfOwners %></li>
          <li class="text-white">Accidents: <%= post.accidents %></li>
          <li class="text-white">Modicications: <%= post.modifications %></li>
          <li class="text-white">Recent Repairs: <%= post.repairs %></li>
          <li class="text-white">Known Issues: <%= post.issues %></li>
        </ul>
      </div>
      <%if(user == undefined || user.isBoss !== true){ %>
        <span></span>
        <%}else{%>
        <div class="col">
          <h2 class="text-light">Gerland's Eyes Only</h2>
          <h2 class="text-light">Owner Info</h2>
          <ul style="list-style: none;">
            <li class="text-white">Owner Name: <%= post.ownerName %></li>
            <li class="text-white">Owner Phone: <%= post.ownerPhone %></li>
            <li class="text-white">Owner Email: <%= post.ownerEmail %></li>
            <li class="text-white">Owner Departure: <%= post.ownerDeparture %></li>
            <li class="text-white">Owner Passport Changed: <%= post.ownerPassportChanged %></li>
          </ul>
        </div>
        <!-- document carousel -->
        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img class="d-block w-100" src="<%= post.documentImage[0] %>" alt="slide #1">
            </div>
            <% for(let i=1; i<post.documentImage.length; i++) {%>
              <div class="carousel-item ">
                <img class="d-block w-100" src="<%= post.documentImage[i] %>" alt="slide #<%= i+1 %>">
              </div>
            <% } %>  
          </div>
          <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div> 
        <!-- end document carousel -->
      <%}%> 
      <!-- add delete option -->
      <%if( user == undefined || user.isBoss !== true){ %>
        <span></span>
        <%}else{%>
        <form
        class="row justify-content-center mt-3"
          action="/post/deletePost/<%= post.id %>?_method=DELETE"
          method="POST" 
        >
          <button class="btn btn-outline-danger btn-lg px-4 me-sm-3 fw-bold mt-2 mb-2" type="submit">Delete This Post</button>
        </form>
      <%}%>
    </div>
    <div class="row">
      <img class="img-fluid" style="max-width: 25%;" src="https://res.cloudinary.com/dllmha3wx/image/upload/v1665380415/phisycal-inspection_bdkei7.png" alt="physical inspection img">
      <img class="img-fluid" style="max-width: 25%;" src="https://res.cloudinary.com/dllmha3wx/image/upload/v1665380415/registration-and-owner-check_kgp8pu.png" alt="registration and owner check">
      <img class="img-fluid" style="max-width: 25%;" src="https://res.cloudinary.com/dllmha3wx/image/upload/v1665380415/odometer-tampering-check_yliimy.png" alt="odometer tampering check">
      <img class="img-fluid" style="max-width: 25%;" src="https://res.cloudinary.com/dllmha3wx/image/upload/v1665380415/service-history-record_pj0f5z.png" alt="service history record">
    </div>
    <div class="text-white">
      <span class="text-white">This car comes with our ECS Genuine Mileage Guaranteeâ„¢ which is our policy to only sell privately owned cars that we can verify through a rigorous review process. This includes an inspection, service history review, registration check, and more.</span>
      <span class="text-white">For over 15 years, we have never sold a car with a tampered odometer.</span>
    </div>
  </div>
  <div class="col mt-5">
    <a class="btn btn-outline-info btn-lg px-4 me-sm-3 fw-bold" href="/profile">Sell You Car</a>
    <a class="btn btn-outline-info btn-lg px-4 me-sm-3 fw-bold" href="/feed">Our Showroom</a>
  </div>
  <%if( user == undefined || user.isBoss !== true){ %>
    <span></span>
    <%}else{%>
    <div class="col  text-center mt-3">
      <a class="btn btn-primary" data-toggle="collapse" href="#updateForm" role="button" aria-expanded="false" aria-controls="updateForm">update</a>
    </div>
    <div class="row collapse" id="updateForm">
      <form action="/post/updatePost/<%= post.id %>?_method=PUT"  method="POST">
        <span class="text-white">I still have to make a contact form</span>
        <div class="mb-10 text-white">
          <h2 class="text-white mb-10">Owner Contact Info</h2>
          <label for="ownerName" class="pt-3 pb-2" >Owner's Full Name</label>
            <input type="text" placeholder="" value="<%= post.ownerName %>" name="ownerName" class="form-control transBack">
            <label for="ownerPhone" class=" pt-3 pb-2">Owner's Contact Number</label>
            <input type="text" placeholder="ex. +61 111 123 4567" name="ownerPhone" class="form-control transBack mb-10" value="<%= post.ownerPhone %>"> 
            <label for="ownerEmail" class="pt-3 pb-2">Owner's Email Addess</label>
            <input type="text" placeholder="ex. tom123@gmail.com" name="ownerEmail" class="form-control transBack mb-10" value="<%= post.ownerEmail %>"> 
            <label for="ownerDeparture" class="pt-3 pb-2">Leaving Malaysia? If yes, what is your date of departure?</label>
            <input type="text" placeholder="Yes, July 4, 2022" name="ownerDeparture" class="form-control transBack mb-10" value="<%= post.ownerDeparture %>"> 
            <label for="ownerPassportChanged" class="pt-3 pb-2">Have you changed your passport since buying the car?</label>
            <input type="text" placeholder="Yes or no? If yes, please attach a scan of your passport info page." name="ownerPassportChanged" class="form-control transBack mb-10" value="<%= post.ownerPassportChanged %>"> 
        </div>
        <div class="mb-10 pt-4 text-white">
          <h2 class="text-white">Vehicle Info</h2>
          <label for="make" class="form-label pt-3 pb-2">Make</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="make" name="make" value="<%= post.make %>">
          <label for="model" class="form-label pt-3 pb-2">Model</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="model" name="model" value="<%= post.model %>">
          <label for="spec" class="form-label pt-3 pb-2">Spec</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="spec" name="spec" value="<%= post.spec %>">
          <label for="engineSize" class="form-label pt-3 pb-2">Engine Size</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="engineSize" name="engineSize" value="<%= post.engineSize %>">
          <label for="year" class="form-label pt-3 pb-2">Year</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="year" name="year" value="<%= post.year %>">
          <label for="transmission" class="form-label pt-3 pb-2">Transmission</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="transmission" name="transmission" value="<%= post.transmission %>">
          <label for="numOfSeats" class="form-label pt-3 pb-2">Number of Seats</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="numOfSeats" name="numOfSeats" value="<%= post.numOfSeats %>">
          <label for="color" class="form-label pt-3 pb-2">Color</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="color" name="color" value="<%= post.color %>">
          <label for="fuelType" class="form-label pt-3 pb-2">Fuel Type</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="fuelType" name="fuelType" value="<%= post.fuelType %>">
          <label for="tires" class="form-label pt-3 pb-2">Tires Condition</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="tires" name="tires" value="<%= post.tires %>">
          <label for="mileage" class="form-label pt-3 pb-2">Mileage in Kilometers</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="mileage" name="mileage" placeholder="ex. 52,xxx"  value="<%= post.mileage %>">
          <label for="history" class="form-label pt-3 pb-2">Full Service History?</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="history" name="history" placeholder="If yes, say yes. If no, please briefly explain"  value="<%= post.history %>">
          <label for="numOfOwners" class="form-label pt-3 pb-2">Total number of owners</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="numOfOwners" name="numOfOwners" value="<%= post.numOfOwners %>">
          <label for="accidents" class="form-label pt-3 pb-2">Accidents?</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="accidents" name="accidents" value="<%= post.accidents %>">
          <label for="modifications" class="form-label pt-3 pb-2">Modifications</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="modifications" name="modifications" value="<%= post.modifications %>">
          <label for="repairs" class="form-label pt-3 pb-2">Major Repairs</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="repairs" name="repairs" value="<%= post.repairs %>">
          <label for="issues" class="form-label pt-3 pb-2">Current Known Issues</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="issues" name="issues" placeholder="Please let any issues, large or small, that you know of."  value="<%= post.issues %>">
          <label for="priceOfficial" class="form-label pt-3 pb-2">Official Price</label>
          <input style="background:rgba(255,255,255,0.7)" type="text" class="form-control" id="priceOfficial" name="priceOfficial" placeholder="Please let any issues, large or small, that you know of."  value="<%= post.priceOfficial %>">
          
          
        </div>
        <div class="mb-10 form-check form-switch pt-4">
          <!-- <input class="form-check-input" type="checkbox" role="switch" id="forRent" name="forRent"  checked>
          <label class="form-check-labe text-white" for="forRent">Is this car for rent?</label> -->
          <!-- <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked" name="public" value="<%= post.public %>" checked>
          <label class="form-check-labe text-white" for="flexSwitchCheckChecked">Publish</label>
        </div> -->
        <div>
          <label for="publicOrPrivate" class="form-label pt-3 text-light pb-2">Do you want to make this car <%= post.publicOrPrivate == "public" ? "private or keep it public" : "public or keep it private" %>?</label>
          <select name="publicOrPrivate" id="publicOrPrivate" >
            <option value="public" <%= post.publicOrPrivate == "public" ? 'selected' : '' %>>Public</option>
            <option value="private" <%= post.publicOrPrivate == "private" ? 'selected' : '' %> >Private</option>
          </select>
        </div>
        <div>
          <label for="rentOrSale" class="form-label pt-3 text-light pb-2">Do you want to make this car <%= post.rentOrSale == "sale" ? "for rent or keep it as a sale" : "for sale or keep it for rent" %>?</label>
          <select name="rentOrSale" id="rentOrSale" value="<%= post.rentOrSale %>">
            <option value="rent" <%= post.rentOrSale == "rent" ? 'selected' : '' %> >Rent</option>
            <option value="sale" <%= post.rentOrSale == "sale" ? 'selected' : '' %> >Sale</option>
          </select>
        </div>
        <button type="submit" class="btn btn-outline-info btn-lg px-4 me-sm-3 fw-bold mt-4" value="Upload">Update</button>
      </form>
    </div>
    <%}%>
</div>

<%- include('partials/footer') -%>
